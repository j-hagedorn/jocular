---
title: "Dad's Top 100"
output: html_document
date: "2022-08-30"
---

```{r setup, include=FALSE}
library(tidyverse);library(plotly)
knitr::opts_chunk$set(warning = F, message = F, echo = F)
```

```{r get_games, eval = FALSE}
library(nbastatR)
Sys.setenv("VROOM_CONNECTION_SIZE" = 131072 * 2)

games <-
  game_logs(
    seasons = 1959:2022, league = "NBA", result_types = "player",
    season_types = "Regular Season", nest_data = F,
    assign_to_environment = TRUE, return_message = TRUE
  )

player_season <- bref_players_stats(seasons = 2000:2022, tables = c("advanced", "totals", "per_game"))

arrow::write_parquet(games,"data/games.parquet")
arrow::write_parquet(player_season,"data/player_season.parquet")
arrow::write_parquet(df_nba_player_dict,"data/df_nba_player_dict.parquet")

```

```{r}
# games <- arrow::read_parquet("data/games.parquet")
player_season <- arrow::read_parquet("data/player_season.parquet")
# df_nba_player_dict <- arrow::read_parquet("data/df_nba_player_dict.parquet")
```

Criteria:

- Must have played at least 41 games in 2021-2022 season

```{r}
df <-
  player_season %>%
  select(
    yearSeason, idPlayerNBA, namePlayer, agePlayer, groupPosition, slugPosition, slugTeamBREF,
    where(is.numeric),-starts_with("url"),-countTeamsPlayerSeason,
    -countTeamsPlayerSeasonPerGame,-countTeamsPlayerSeasonTotals,-minutes
  ) 

```


# Stats Dictionary

Rk -- Rank
Pos -- Position
- `agePlayer`: Player's age on February 1 of the season
Tm -- Team
- `countGames`: Number of games played during season.
- `countGamesStarted`: Number of games started during season.
- `ratioPER`: Player Efficiency Rating; A measure of per-minute production standardized such that the league average is 15.
- `pctTrueShooting`: A measure of shooting efficiency that takes into account 2-point field goals, 3-point field goals, and free throws.
- `pct3PRate`: 3-Point Attempt Rate; Percentage of FG Attempts from 3-Point Range
- `pctFTRate`: Free Throw Attempt Rate; Number of FT Attempts Per FG Attempt
- `pctORB`: Offensive Rebound Percentage; An estimate of the percentage of available offensive rebounds a player grabbed while they were on the floor.
- `pctDRB`: Defensive Rebound Percentage; An estimate of the percentage of available defensive rebounds a player grabbed while they were on the floor.
- `pctTRB` Total Rebound Percentage; An estimate of the percentage of available rebounds a player grabbed while they were on the floor.
- `pctAST`: Assist Percentage; An estimate of the percentage of teammate field goals a player assisted while they were on the floor.
- `pctSTL`: Steal Percentage; An estimate of the percentage of opponent possessions that end with a steal by the player while they were on the floor.
- `pctBLK`: Block Percentage; An estimate of the percentage of opponent two-point field goal attempts blocked by the player while they were on the floor.
- `pctTOV`: Turnover Percentage; An estimate of turnovers committed per 100 plays.
- `pctUSG`: Usage Percentage; An estimate of the percentage of team plays used by a player while they were on the floor.
- `ratioOWS`: Offensive Win Shares; An estimate of the number of wins contributed by a player due to offense.
- `ratioDWS`: Defensive Win Shares; An estimate of the number of wins contributed by a player due to defense.
- `ratioWS`: Win Shares; An estimate of the number of wins contributed by a player.
- `ratioWSPer48`: Win Shares Per 48 Minutes; An estimate of the number of wins contributed by a player per 48 minutes (league average is approximately .100)
- `ratioOBPM`: Offensive Box Plus/Minus; A box score estimate of the offensive points per 100 possessions a player contributed above a league-average player, translated to an average team.
- `ratioDBPM`: Defensive Box Plus/Minus; A box score estimate of the defensive points per 100 possessions a player contributed above a league-average player, translated to an average team.
- `ratioBPM`: Box Plus/Minus; A box score estimate of the points per 100 possessions a player contributed above a league-average player, translated to an average team.
- `ratioVORP`: Value over Replacement Player; A box score estimate of the points per 100 TEAM possessions that a player contributed above a replacement-level (-2.0) player, translated to an average team and prorated to an 82-game season.
